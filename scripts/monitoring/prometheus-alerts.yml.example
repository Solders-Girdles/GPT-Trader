groups:
  - name: gpt_trader_alerts
    interval: 30s
    rules:
      - alert: GptTraderNoMetrics
        expr: time() - gpt_trader_metrics_timestamp_seconds > 300
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "GPT-Trader metrics stale"
          description: "No fresh cycle metrics received for over 5 minutes."

      - alert: GptTraderLowTradingLimit
        expr: gpt_trader_account_limit_remaining < 1000
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Trading limit running low"
          description: "Remaining Coinbase trading limit is below $1,000."

      - alert: GptTraderPreviewFailures
        expr: increase(gpt_trader_order_preview_failures_total[5m]) > 0
        labels:
          severity: warning
        annotations:
          summary: "Order preview failures detected"
          description: "GPT-Trader encountered order preview errors in the last 5 minutes."
