artifact: execution_flow_map
description: "Execution flow map (decision \u2192 guard stack \u2192 submission \u2192\
  \ telemetry/event store)."
clusters:
- id: entry
  label: Entry + Decision
- id: guards
  label: Guard + Validation
- id: submission
  label: Submission + Telemetry
- id: event_store
  label: Event Store
- id: outcomes
  label: Outcomes
nodes:
- id: trading_engine_cycle
  label: TradingEngine._cycle
  type: entrypoint
  path: src/gpt_trader/features/live_trade/engines/strategy.py
  cluster: entry
- id: strategy_decide
  label: Strategy.decide
  type: decision
  path: src/gpt_trader/features/live_trade/strategies/base.py
  cluster: entry
- id: order_router
  label: OrderRouter.execute_async (external)
  type: entrypoint
  path: src/gpt_trader/features/live_trade/execution/router.py
  cluster: entry
- id: engine_submit
  label: TradingEngine.submit_order
  type: entrypoint
  path: src/gpt_trader/features/live_trade/engines/strategy.py
  cluster: entry
- id: engine_validate
  label: TradingEngine._validate_and_place_order
  type: guard_stack
  path: src/gpt_trader/features/live_trade/engines/strategy.py
  cluster: guards
- id: degradation_gate
  label: Degradation gate
  type: guard
  path: src/gpt_trader/features/live_trade/degradation.py
  cluster: guards
- id: security_validator
  label: Security validator
  type: guard
  path: src/gpt_trader/security/security_validator.py
  cluster: guards
- id: risk_manager
  label: LiveRiskManager.pre_trade_validate
  type: guard
  path: src/gpt_trader/features/live_trade/risk/manager/__init__.py
  cluster: guards
- id: order_validator
  label: OrderValidator (exchange/slippage/preview)
  type: guard
  path: src/gpt_trader/features/live_trade/execution/validation.py
  cluster: guards
- id: engine_mark_staleness
  label: TradingEngine._check_mark_staleness
  type: guard
  path: src/gpt_trader/features/live_trade/engines/strategy.py
  cluster: guards
- id: risk_check_mark_staleness
  label: LiveRiskManager.check_mark_staleness
  type: guard
  path: src/gpt_trader/features/live_trade/risk/manager/__init__.py
  cluster: guards
- id: order_submitter
  label: OrderSubmitter.submit_order
  type: submission
  path: src/gpt_trader/features/live_trade/execution/order_submission.py
  cluster: submission
- id: order_rejection
  label: OrderSubmitter.record_rejection
  type: telemetry
  path: src/gpt_trader/features/live_trade/execution/order_submission.py
  cluster: submission
- id: broker_executor
  label: BrokerExecutor.execute_order
  type: submission
  path: src/gpt_trader/features/live_trade/execution/broker_executor.py
  cluster: submission
- id: broker_adapter
  label: BrokerProtocol.place_order
  type: submission
  path: src/gpt_trader/features/brokerages/core/protocols.py
  cluster: submission
- id: order_event_recorder
  label: OrderEventRecorder
  type: telemetry
  path: src/gpt_trader/features/live_trade/execution/order_event_recorder.py
  cluster: submission
- id: orders_store
  label: OrdersStore
  type: telemetry
  path: src/gpt_trader/persistence/orders_store.py
  cluster: submission
- id: engine_append_event
  label: TradingEngine._append_event
  type: telemetry
  path: src/gpt_trader/features/live_trade/engines/strategy.py
  cluster: event_store
- id: emit_metric
  label: emit_metric
  type: telemetry
  path: src/gpt_trader/utilities/telemetry.py
  cluster: event_store
- id: event_store_append_metric
  label: EventStoreProtocol.append_metric
  type: event_store
  path: src/gpt_trader/app/protocols.py
  cluster: event_store
- id: event_store_append
  label: EventStoreProtocol.append
  type: event_store
  path: src/gpt_trader/app/protocols.py
  cluster: event_store
- id: decision_trace
  label: OrderDecisionTrace
  type: outcome
  path: src/gpt_trader/features/live_trade/execution/decision_trace.py
  cluster: outcomes
- id: submission_result
  label: OrderSubmissionResult
  type: outcome
  path: src/gpt_trader/features/live_trade/execution/submission_result.py
  cluster: outcomes
edges:
- from: trading_engine_cycle
  to: strategy_decide
  label: produce decision
- from: strategy_decide
  to: engine_validate
  label: submit decision
- from: order_router
  to: engine_submit
  label: external entry
- from: engine_submit
  to: engine_validate
  label: delegate to guard stack
- from: engine_validate
  to: decision_trace
  label: record outcomes
- from: engine_validate
  to: degradation_gate
  label: pause/allow
- from: degradation_gate
  to: security_validator
  label: validate request
- from: security_validator
  to: engine_mark_staleness
  label: staleness gate
- from: engine_mark_staleness
  to: risk_check_mark_staleness
  label: risk check
- from: engine_mark_staleness
  to: engine_append_event
  label: stale_mark_detected
- from: engine_append_event
  to: event_store_append
  label: append event
- from: engine_mark_staleness
  to: order_validator
  label: continue guards
- from: order_validator
  to: risk_manager
  label: pre-trade validate
- from: engine_validate
  to: order_rejection
  label: guard rejection
- from: order_rejection
  to: order_event_recorder
  label: record rejection
- from: order_validator
  to: order_submitter
  label: submit order
- from: order_submitter
  to: broker_executor
  label: execute broker call
- from: broker_executor
  to: broker_adapter
  label: place order
- from: order_submitter
  to: order_event_recorder
  label: record events
- from: order_event_recorder
  to: emit_metric
  label: emit metrics
- from: emit_metric
  to: event_store_append_metric
  label: append_metric
- from: order_event_recorder
  to: event_store_append
  label: decision trace
- from: order_submitter
  to: orders_store
  label: persist order
- from: engine_validate
  to: submission_result
  label: return status
notes:
- TradingEngine._cycle submits strategy decisions directly to the guard stack.
- OrderRouter routes external decisions to TradingEngine.submit_order.
- OrderSubmitter handles broker IO, telemetry, and persistence.
- Guard rejections emit metrics; stale marks append EventStore events.
