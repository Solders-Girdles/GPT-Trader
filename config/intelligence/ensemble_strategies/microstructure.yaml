# Microstructure-Enhanced Ensemble Strategy Profile
# Uses orderbook depth, trade flow, and VWAP signals

name: microstructure
version: "1.0"
description: Advanced ensemble using market microstructure signals (orderbook, trade flow, VWAP)

signals:
  - name: trend
    enabled: true
    parameters:
      fast_period: 12
      slow_period: 26

  - name: order_flow
    enabled: true
    parameters:
      aggressor_threshold_bullish: 0.65
      aggressor_threshold_bearish: 0.35
      min_trades: 15
      volume_weight: true

  - name: orderbook_imbalance
    enabled: true
    parameters:
      levels: 10
      imbalance_threshold: 0.25
      strong_imbalance_threshold: 0.5

  - name: spread
    enabled: true
    parameters:
      tight_spread_bps: 5.0
      normal_spread_bps: 15.0
      wide_spread_bps: 30.0

  - name: vwap
    enabled: true
    parameters:
      deviation_threshold: 0.008
      strong_deviation_threshold: 0.02
      min_trades: 25

combiner:
  adx_period: 14
  trending_threshold: 25
  ranging_threshold: 20

  trending_weights:
    TREND: 0.8
    MEAN_REVERSION: 0.2
    ORDER_FLOW: 1.0
    MICROSTRUCTURE: 0.6
    VOLATILITY: 0.4

  ranging_weights:
    TREND: 0.2
    MEAN_REVERSION: 1.0
    ORDER_FLOW: 0.7
    MICROSTRUCTURE: 0.8
    VOLATILITY: 0.5

decision:
  buy_threshold: 0.25
  sell_threshold: -0.25
  close_threshold: 0.12
  stop_loss_pct: 0.018
  take_profit_pct: 0.045

tags:
  - microstructure
  - advanced
  - orderbook
  - trade-flow
