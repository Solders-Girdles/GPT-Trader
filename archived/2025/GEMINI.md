# Gemini Code Understanding

This document provides a comprehensive overview of the GPT-Trader V2 project, generated by Gemini to facilitate future interactions and development.

## Project Overview

GPT-Trader V2 is an advanced algorithmic trading system designed for equities. It leverages a modular, "vertical slice" architecture, where each core feature is developed in isolation. The system's intelligence is driven by machine learning models that dynamically select trading strategies based on real-time market conditions and regime detection.

The project is built with Python 3.12+ and uses the Poetry package manager for dependency management. It is currently in a state of "active recovery," with a significant portion of the functionality operational but some components requiring fixes and integration.

### Key Technologies

- **Backend:** Python 3.12+
- **Dependency Management:** Poetry
- **Machine Learning:** scikit-learn, XGBoost, LightGBM, (optional TensorFlow/PyTorch)
- **Data & Analysis:** Pandas, NumPy, TA-Lib
- **API & Web:** FastAPI, Streamlit
- **Trading Integration:** Alpaca
- **Code Quality:** Ruff, Black, MyPy
- **Testing:** PyTest

### Architecture

The core of GPT-Trader V2 is its **vertical slice architecture**, located in `src/bot_v2/features/`. Each subdirectory in this folder represents a distinct feature, such as `ml_strategy`, `market_regime`, `backtest`, and `live_trade`. This design promotes isolation, making the system easier to develop, test, and maintain.

The system is configured through a central `config/system_config.json` file, which controls logging, data providers, error handling, and feature-specific parameters.

## Building and Running

### Prerequisites

- Python 3.12+
- Poetry

### Installation

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd GPT-Trader
    ```

2.  **Install dependencies:**
    ```bash
    poetry install
    ```

3.  **Set up environment variables:**
    ```bash
    cp .env.template .env
    # Add your API keys to the .env file
    ```

### Running the Application

The project provides a command-line interface (CLI) as the main entry point.

-   **View all commands:**
    ```bash
    poetry run gpt-trader --help
    ```

-   **Run a backtest:**
    ```bash
    poetry run gpt-trader backtest --symbol AAPL --start 2024-01-01 --end 2024-03-01
    ```

-   **Launch the dashboard:**
    ```bash
    poetry run gpt-trader dashboard
    ```

### Running Tests

The project uses PyTest for testing. The test suite is currently at a 73% pass rate.

-   **Run the minimal baseline tests:**
    ```bash
    poetry run pytest tests/minimal_baseline/ -v
    ```

-   **Run all tests (expect failures):**
    ```bash
    poetry run pytest
    ```

## Development Conventions

### Code Style

-   The project uses **Black** for code formatting and **Ruff** for linting.
-   Configuration for these tools can be found in `pyproject.toml`.
-   **MyPy** is used for static type checking.

### Branching and Commits

-   (TODO: Infer from `git log` or contribution guidelines if available)

### Testing

-   Tests are located in the `tests/` directory.
-   The project aims for high test coverage, although the test suite currently requires attention.
-   New features should be developed as isolated vertical slices in `src/bot_v2/features/` and include corresponding tests.

### Error Handling

-   The system uses a custom error handling framework defined in `src/bot_v2/errors/`.
-   Decorators like `@with_error_handling` are used to ensure robustness and provide fallback mechanisms.
