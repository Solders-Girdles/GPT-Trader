/* Main Stylesheet - GPT-Trader TUI
 *
 * Theme: Claude Code-inspired warm, editorial aesthetic
 * Palette: Rust-orange accent (#C15F3C) with warm browns and parchment tones
 *
 * This stylesheet combines all TUI styling modules:
 * 1. Theme variables (colors and spacing)
 * 2. Layout structure
 * 3. Core components
 * 4. Widget-specific styles
 * 5. Animations and transitions
 */

/* ========================================================================== */
/* THEME VARIABLES - Claude Code Palette                                     */
/* ========================================================================== */

/* === Backgrounds === */
$bg-primary: #1A1815;      /* Deep warm brown "coffee stain" - main background */
$bg-secondary: #2E2922;    /* Slightly lighter warm brown - containers */
$bg-elevated: #3A3530;     /* Elevated surfaces - headers, highlights */

/* === Accents === */
$accent: #C15F3C;          /* Signature rust-orange - primary accent */
$accent-hover: #D17A5A;    /* Lighter rust - hover states */
$accent-muted: #8B4428;    /* Darker rust - borders, subtle accents */

/* === Text Colors === */
$text-primary: #E8E6E3;    /* Light warm grey - primary text */
$text-secondary: #ABA8A5;  /* Muted grey - labels, secondary text */
$text-muted: #6B6865;      /* Very muted grey - hints, disabled text */

/* === Semantic Colors === */
$success: #7AA874;         /* Warm green - positive values, success states */
$warning: #D8A657;         /* Warm amber - warnings, caution */
$error: #D4736E;           /* Warm coral-red - errors, negative values */
$info: #6FA8C4;            /* Warm blue-grey - informational */

/* === Borders === */
$border-subtle: #3A3530;   /* Subtle warm border - light dividers */
$border-emphasis: #4A453F; /* Emphasized border - prominent dividers */

/* === Spacing Scale === */
$spacing-xs: 1;            /* Extra small spacing - tight elements */
$spacing-sm: 2;            /* Small spacing - compact layouts */
$spacing-md: 3;            /* Medium spacing - standard padding */
$spacing-lg: 4;            /* Large spacing - generous padding */

/* ========================================================================== */
/* LAYOUT PATTERNS                                                            */
/* ========================================================================== */

/* === Global Layout === */

Screen {
    layout: vertical;
    background: $bg-primary;
    color: $text-primary;
}

Label {
    color: $text-primary;
}

/* === Main Workspace === */

#main-workspace {
    layout: vertical;
    height: 100%;
}

/* === Trading Section (70% height) === */

#trading-section {
    height: 70%;
    layout: horizontal;
    border-bottom: tall $border-emphasis;
}

#market-column {
    width: 50%;
    height: 100%;
    border-right: wide $border-subtle;
    layout: vertical;
}

#execution-column {
    width: 50%;
    height: 100%;
    layout: vertical;
}

/* === Monitoring Section (30% height) === */

#monitoring-section {
    height: 30%;
    layout: horizontal;
}

#system-column {
    width: 40%;
    height: 100%;
    border-right: wide $border-subtle;
    layout: vertical;
}

#logs-column {
    width: 60%;
    height: 100%;
}

/* === Dashboard Items === */

.dashboard-item {
    height: 1fr;
    border: solid $border-subtle;
    background: $bg-secondary;
    padding: $spacing-sm $spacing-md;  /* More generous horizontal padding */
    margin: 0 $spacing-xs;
}

.dashboard-item-elevated {
    background: $bg-elevated;
}

/* === Panel Style === */

.panel {
    background: $bg-secondary;
    border: round $border-subtle;
    padding: $spacing-md;
    margin: $spacing-xs;
}

/* ========================================================================== */
/* CORE COMPONENT STYLES                                                      */
/* ========================================================================== */

/* === Headers & Footers === */

Header {
    dock: top;
    height: 1;
    background: $bg-secondary;
    color: $text-primary;
}

Footer {
    dock: bottom;
    height: 1;
    background: $bg-secondary;
    color: $text-primary;
}

/* === Widget Headers === */

.header {
    color: $accent;
    text-style: bold;
    text-align: left;              /* Left-aligned editorial style */
    background: $bg-elevated;
    padding: $spacing-xs $spacing-md;
    border-bottom: thick $accent-muted;
    height: 3;
}

.header-icon {
    color: $accent;
    margin-right: $spacing-xs;
}

/* === Buttons === */

Button {
    min-width: 12;
    margin: 0 $spacing-xs;
    border: solid $border-emphasis;
    padding: $spacing-xs $spacing-md;
    background: $bg-elevated;
    color: $text-primary;
}

Button:hover {
    text-style: bold;
    border: solid $accent;
    background: $accent-muted;
    color: $text-primary;
}

Button:focus {
    border: double $accent;
}

Button.-disabled {
    opacity: 0.4;
    color: $text-muted;
}

/* === DataTable === */

DataTable {
    background: $bg-primary;
    color: $text-primary;
    border: none;
    padding: 0 $spacing-md;        /* Generous horizontal padding */
    height: 1fr;
}

DataTable > .datatable--header {
    background: $bg-elevated;
    color: $accent;
    text-style: bold;
    padding: $spacing-xs $spacing-md;
    border-bottom: solid $accent-muted;
}

DataTable > .datatable--cursor {
    background: $accent-muted;
    color: $text-primary;
    text-style: bold;
}

DataTable > .datatable--odd-row {
    background: $bg-primary;
}

DataTable > .datatable--even-row {
    background: rgba(58, 53, 48, 0.3);  /* Very subtle zebra striping */
}

DataTable:focus > .datatable--cursor {
    background: $accent;
    color: $bg-primary;
    text-style: bold;
}

/* Row hover effect */
DataTable > .datatable--hover {
    background: rgba(193, 95, 60, 0.15);  /* Subtle accent tint on hover */
}

/* === Tabs === */

Tabs {
    background: $bg-secondary;
    color: $text-primary;
    dock: top;
    height: 3;
}

Tab {
    padding: $spacing-xs $spacing-md;
}

Tab.-active {
    background: $bg-elevated;
    color: $accent;
    text-style: bold;
    border-bottom: solid $accent;
}

/* === Content Areas === */

ContentSwitcher {
    background: $bg-primary;
    height: 1fr;
}

#dashboard-container, #market-container, #positions-container, #system-container {
    padding: $spacing-xs;
    height: 1fr;
}

/* === Empty States === */

.empty-state {
    color: $text-muted;
    text-style: italic;
    text-align: center;
    padding: $spacing-lg $spacing-md;
    background: rgba(58, 53, 48, 0.2);
    border: dashed $border-subtle;
    margin: $spacing-md;
    height: auto;
    display: none;  /* Hidden by default */
}

.empty-state-icon {
    color: $accent;
    text-style: bold;
    margin-bottom: $spacing-xs;
}

.empty-state-title {
    color: $text-secondary;
    text-style: bold;
}

.empty-state-hint {
    color: $text-muted;
    text-style: italic;
    margin-top: $spacing-xs;
}

/* === Log Widget === */

Log {
    background: $bg-secondary;
    color: $text-primary;
    border: solid $border-subtle;
    padding: 0 $spacing-xs;
}

/* === Typography Utilities === */

.text-success { color: $success; }
.text-error { color: $error; }
.text-warning { color: $warning; }
.text-info { color: $info; }
.text-muted { color: $text-muted; }

.bold { text-style: bold; }

/* === Accessibility === */

/* Focus indicators for keyboard navigation */
*:focus {
    border: solid $accent;
    outline: solid $accent;
}

Button:focus, DataTable:focus {
    border: double $accent;
}

/* ========================================================================== */
/* WIDGET-SPECIFIC STYLES                                                     */
/* ========================================================================== */

/* === Status Bar (BotStatusWidget) === */

#bot-status-header {
    dock: top;
    height: 6;                     /* Taller for prominence */
    background: $bg-secondary;
    color: $text-primary;
    border-bottom: double $accent;  /* Double border for emphasis */
    padding: 0;
}

#status-bar-container {
    height: 100%;
    align-vertical: middle;
}

.status-section {
    padding: 0 $spacing-md;
    height: 100%;
    align-vertical: middle;
}

#bot-controls {
    width: auto;
    border-right: solid $border-subtle;
}

#status-info {
    width: 1fr;
    border-right: solid $border-subtle;
}

#performance-metrics {
    width: auto;
}

.status-row {
    height: auto;
    align-vertical: middle;
    margin-bottom: 0;
}

/* === Status Labels & Values === */

.status-label {
    color: $text-secondary;
    text-style: bold;
    margin-right: $spacing-xs;
}

.status-value {
    color: $text-primary;
    text-style: bold;
    margin-right: $spacing-md;
    background: $bg-elevated;
    padding: 0 $spacing-md;
    border: solid $border-subtle;
}

.status-running {
    color: $success;
    background: rgba(122, 168, 116, 0.2);
    padding: 0 $spacing-md;
    border: solid $success;
}

.status-stopped {
    color: $error;
    background: rgba(212, 115, 110, 0.2);
    padding: 0 $spacing-md;
    border: solid $error;
}

/* === Heartbeat Indicator === */

.heartbeat-pulse {
    margin-left: $spacing-xs;
}

.heartbeat-bright {
    color: $success;
    text-style: bold;
}

.heartbeat-dim {
    color: $text-muted;
}

/* === P&L Color Coding === */

.pnl-positive {
    color: $success;
}

.pnl-negative {
    color: $error;
}

.pnl-neutral {
    color: $text-secondary;
}

/* === Button Group === */

.button-group {
    align-vertical: middle;
    height: 100%;
}

/* === Contextual Footer === */

ContextualFooter {
    dock: bottom;
    height: 1;
    background: $bg-secondary;
    border-top: double $accent;     /* Double border to match status bar */
}

#contextual-footer {
    height: 100%;
    align-vertical: middle;
    padding: 0 $spacing-md;
}

.footer-group {
    margin-right: $spacing-md;
    align-vertical: middle;
}

.footer-group-right {
    dock: right;
}

.footer-key {
    color: $bg-primary;
    text-style: bold;
    background: $accent;
    padding: 0 $spacing-md;
    margin-right: $spacing-xs;
}

.footer-label {
    color: $text-primary;
    margin-right: $spacing-md;  /* More spacing between groups */
}

.footer-separator {
    color: $border-subtle;
    margin: 0 $spacing-xs;
}

/* === Account Widget === */

AccountWidget {
    layout: vertical;
    padding: $spacing-xs;
}

.account-metric {
    background: $bg-elevated;
    border: solid $border-subtle;
    padding: $spacing-xs $spacing-md;
    margin: $spacing-xs;
    height: auto;
}

.account-metric-label {
    color: $text-secondary;
    text-style: bold;
}

.account-metric-value {
    color: $text-primary;
    text-style: bold;
    text-align: right;
}

.portfolio-summary-row {
    margin-bottom: $spacing-sm;
}

.portfolio-metric {
    background: $bg-elevated;
    border: solid $border-subtle;
    padding: $spacing-xs $spacing-md;
    margin: $spacing-xs;
}

.portfolio-metric-label {
    color: $text-secondary;
    text-style: bold;
}

.portfolio-metric-value {
    color: $text-primary;
    text-style: bold;
}

.account-metrics-row {
    margin-bottom: $spacing-sm;
}

/* === Block Chart Widget === */

BlockChartWidget {
    height: 5;
    padding: 0 $spacing-xs;
    border-top: solid $border-subtle;
}

.chart-content {
    height: 3;
    color: $success;               /* Default to success color */
}

/* ========================================================================== */
/* ANIMATIONS & TRANSITIONS                                                   */
/* ========================================================================== */

/* Note: Textual has limited transition support
 * Animations are handled via Python update intervals
 */

/* === Loading Spinner === */

/* Note: Unicode Braille spinner (⠋⠙⠹⠸⠼⠴⠦⠧⠇⠏) is animated via Python interval,
 * not CSS animations, for reliable terminal rendering.
 */

LoadingSpinner {
    width: auto;
    height: auto;
    align-horizontal: center;
    align-vertical: middle;
}

#spinner-display {
    color: $accent;
    text-style: bold;
    text-align: center;
}

.loading-spinner {
    color: $accent;
    text-style: bold;
    text-align: center;
}

.loading-message {
    color: $text-secondary;
    text-align: center;
    margin-top: $spacing-xs;
}

.loading-container {
    padding: $spacing-lg;
    background: rgba(58, 53, 48, 0.2);
    border: solid $border-subtle;
    align-horizontal: center;
    align-vertical: middle;
}

/* Note: Textual doesn't support @keyframes or @media queries
 * Advanced animations and media queries must be implemented in Python
 */
