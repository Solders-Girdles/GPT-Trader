{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RiskConfig",
  "type": "object",
  "properties": {
    "max_leverage": {
      "type": "integer",
      "default": 5,
      "description": "Maximum allowed leverage multiplier"
    },
    "daily_loss_limit": {
      "type": "string",
      "format": "decimal",
      "description": "Maximum daily loss in quote currency",
      "default": "100"
    },
    "daily_loss_limit_pct": {
      "type": "number",
      "default": 0.05
    },
    "max_exposure_pct": {
      "type": "number",
      "default": 0.8,
      "description": "Maximum portfolio exposure as decimal (0.8 = 80%)"
    },
    "max_position_pct_per_symbol": {
      "type": "number",
      "default": 0.2,
      "description": "Maximum position size per symbol as decimal"
    },
    "min_liquidation_buffer_pct": {
      "type": "number",
      "default": 0.1,
      "description": "Minimum buffer before liquidation as decimal"
    },
    "leverage_max_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "integer"
      },
      "default": {},
      "description": "Per-symbol maximum leverage overrides"
    },
    "max_notional_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "string",
        "format": "decimal",
        "description": "Decimal number as string"
      },
      "default": {},
      "description": "Per-symbol maximum notional value"
    },
    "slippage_guard_bps": {
      "type": "integer",
      "default": 50,
      "description": "Slippage guard in basis points (100 = 1%)"
    },
    "kill_switch_enabled": {
      "type": "boolean",
      "default": false,
      "description": "Enable emergency kill switch"
    },
    "reduce_only_mode": {
      "type": "boolean",
      "default": false,
      "description": "Force reduce-only mode for all orders"
    },
    "daytime_start_utc": {
      "type": "string",
      "default": "09:00",
      "description": "Daytime period start (HH:MM UTC)"
    },
    "daytime_end_utc": {
      "type": "string",
      "default": "17:00",
      "description": "Daytime period end (HH:MM UTC)"
    },
    "day_leverage_max_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "integer"
      },
      "default": {},
      "description": "Per-symbol leverage limits during daytime"
    },
    "night_leverage_max_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "integer"
      },
      "default": {},
      "description": "Per-symbol leverage limits during nighttime"
    },
    "day_mmr_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "number"
      },
      "default": {},
      "description": "Maintenance margin requirement overrides (day)"
    },
    "night_mmr_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "number"
      },
      "default": {},
      "description": "Maintenance margin requirement overrides (night)"
    },
    "enable_pre_trade_liq_projection": {
      "type": "boolean",
      "default": false,
      "description": "Enable pre-trade liquidation projection"
    },
    "cfm_max_leverage": {
      "type": "integer",
      "default": 5
    },
    "cfm_min_liquidation_buffer_pct": {
      "type": "number",
      "default": 0.15
    },
    "cfm_max_exposure_pct": {
      "type": "number",
      "default": 0.8
    },
    "cfm_max_position_size_pct": {
      "type": "number",
      "default": 0.25
    },
    "cfm_leverage_max_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "integer"
      },
      "default": {}
    },
    "cfm_max_notional_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "string",
        "format": "decimal",
        "description": "Decimal number as string"
      },
      "default": {}
    },
    "cfm_day_leverage_max_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "integer"
      },
      "default": {}
    },
    "cfm_night_leverage_max_per_symbol": {
      "type": "object",
      "additionalProperties": {
        "type": "integer"
      },
      "default": {}
    },
    "api_error_rate_threshold": {
      "type": "number",
      "default": 0.2
    },
    "api_rate_limit_usage_threshold": {
      "type": "number",
      "default": 0.9
    },
    "api_health_cooldown_seconds": {
      "type": "integer",
      "default": 300
    },
    "mark_staleness_cooldown_seconds": {
      "type": "integer",
      "default": 120
    },
    "mark_staleness_threshold_seconds": {
      "type": "number",
      "default": 30.0
    },
    "mark_staleness_allow_reduce_only": {
      "type": "boolean",
      "default": true
    },
    "slippage_failure_pause_after": {
      "type": "integer",
      "default": 3
    },
    "slippage_pause_seconds": {
      "type": "integer",
      "default": 60
    },
    "validation_failure_cooldown_seconds": {
      "type": "integer",
      "default": 180
    },
    "preview_failure_disable_after": {
      "type": "integer",
      "default": 5
    },
    "broker_outage_max_failures": {
      "type": "integer",
      "default": 3
    },
    "broker_outage_cooldown_seconds": {
      "type": "integer",
      "default": 120
    },
    "unfilled_order_alert_seconds": {
      "type": "integer",
      "default": 300
    },
    "ws_health_interval_seconds": {
      "type": "integer",
      "default": 5
    },
    "ws_message_stale_seconds": {
      "type": "integer",
      "default": 15
    },
    "ws_heartbeat_stale_seconds": {
      "type": "integer",
      "default": 30
    },
    "ws_reconnect_pause_seconds": {
      "type": "integer",
      "default": 30
    }
  },
  "description": "Risk configuration for live trading.\n\n    This dataclass holds all risk-related parameters including:\n    - General limits (leverage, loss limits, exposure caps)\n    - Per-symbol limits (position sizes, leverage caps)\n    - CFM futures-specific parameters\n    - API health and degradation thresholds\n    - WebSocket monitoring settings\n\n    Example::\n\n        from gpt_trader.features.live_trade.risk import RiskConfig\n\n        config = RiskConfig(\n            max_leverage=3,\n            daily_loss_limit_pct=0.05,\n            max_position_pct_per_symbol=0.2,\n        )"
}
